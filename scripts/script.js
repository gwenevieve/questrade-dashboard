$(document).ready(function(){var t;fetch("/watchlist",{}).then(t=>t.json()).then(e=>{watchlistData=e,console.log(watchlistData);let a="",l="",s="",i="",c="";checkMarketStatus(),$.each(watchlistData,function(e,o){1==t?(l+=`<li>${o.openPrice}</li>`,s+=`<li>${o.highPrice}</li>`,i+=`<li>${o.lowPrice}</li>`):(l+="<li>--</li>",s+="<li>--</li>",i+="<li>--</li>"),watchlistChartData=[6770].lastTradePrice,a+=`<li>${o.symbol}</li>`,c+=`<li><span>${o.lastTradePrice}</span></li>`,$(".watchlistName").html(a),$(".watchlistLastTradePrice").html(c),$(".watchlistOpenPrice").html(l),$(".watchlistHighPrice").html(s),$(".watchlistLowPrice").html(i),0==t&&$(".watchlistLastTradePrice li span").css("background","#797979"),1==t&&this.openPrice>this.lastTradePrice==1?$(".watchlistLastTradePrice li span").css("background","red"):1==t&&this.openPrice<this.lastTradePrice==1&&$(".watchlistLastTradePrice li span").css("background","#31c331")}),$.ajax({url:"/chartinfo",type:"GET",success:function(t){console.log(t),$.each(t,function(e,a){results=a,$.each(t,function(t,e){BABA=e[0].totalCost,CRON=e[1].totalCost})}),chartDisplay()},error:console.error})}),$(".search__submit").on("click",function(t){t.preventDefault(),$.ajax({url:"/search",type:"GET",data:{symbol:$("#search").val()},success:function(t){console.log(t);let e="",a="",l="";$.each(t,function(t,s){if(console.log(t),9===t)return!1;e+=`<li>${s.symbol}</li>`,a+=`<li>${s.symbolId}</li>`,l+=`<li>${s.description}</li>`,$(".name").html(e),$(".symbolId").html(a),$(".symbolDesc").html(l)})},error:console.error})}),chartDisplay=((t,e)=>{let a=document.getElementById("myChart").getContext("2d");myChart=new Chart(a,{type:"doughnut",data:{labels:["BABA","CRON"],datasets:[{fill:!0,backgroundColor:["#6C46D6","#8F42F4"],data:[BABA,CRON]}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:0,right:0,top:0,bottom:30}}}})}),checkMarketStatus=(()=>{moment().format("HH:mm:ss");let e=moment("09:30:00","HH:mm:ss"),a=moment("16:00:00","HH:mm:ss"),l=moment().isBetween(e,a);console.log(l),1==l?(t=!0,$(".marketStatus").html("Open").css("color","#31c331")):(t=!1,$(".marketStatus").html("Closed").css("color","red"))})});
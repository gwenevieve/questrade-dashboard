$(document).ready(function(){var t;fetch("/watchlist",{}).then(t=>t.json()).then(e=>{let l=e,a="",i="",s="",c="",o="";checkMarketStatus(),$.each(l,function(e,l){1==t?(i+=`<li>${l.openPrice}</li>`,s+=`<li>${l.highPrice}</li>`,c+=`<li>${l.lowPrice}</li>`):(i+="<li>--</li>",s+="<li>--</li>",c+="<li>--</li>"),a+=`<li>${l.symbol}</li>`,this.openPrice>this.lastTradePrice==1?o+=`<li><span data-value="gain">${l.lastTradePrice}</span></li>`:this.openPrice<this.lastTradePrice==1&&(o+=`<li><span data-value="loss">${l.lastTradePrice}</span></li>`),0==t&&$(".watchlistLastTradePrice li span").css("background","#797979"),$(".watchlistName").html(a),$(".watchlistLastTradePrice").html(o),$(".watchlistOpenPrice").html(i),$(".watchlistHighPrice").html(s),$(".watchlistLowPrice").html(c)}),fetch("/chartinfo",{}).then(t=>t.json()).then(t=>{let e=t;$.each(e,function(t,l){results=l,$.each(e,function(t,e){BABA=e[0].totalCost,CRON=e[1].totalCost})}),chartDisplay()}).catch(t=>console.log(t))}).catch(t=>console.log(t)),$(".search__submit").on("click",function(t){t.preventDefault(),$(".search__submit").prop("disabled",!0),setTimeout(function(){$(".search__submit").prop("disabled",!1)},1e3),$.ajax({url:"/search",type:"GET",data:{symbol:$("#search").val()},success:function(t){let e="",l="",a="";$.each(t,function(t,i){if(9===t)return!1;e+=`<li>${i.symbol}</li>`,l+=`<li>${i.symbolId}</li>`,a+=`<li>${i.description}</li>`,$(".name").html(e),$(".symbolId").html(l),$(".symbolDesc").html(a)})},error:console.error})}),chartDisplay=((t,e)=>{let l=document.getElementById("myChart").getContext("2d");myChart=new Chart(l,{type:"doughnut",data:{labels:["BABA","CRON"],datasets:[{fill:!0,backgroundColor:["#6C46D6","#8F42F4"],data:[BABA,CRON]}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:0,right:0,top:0,bottom:30}}}})}),checkMarketStatus=(()=>{moment().format("HH:mm:ss");let e=moment("09:30:00","HH:mm:ss"),l=moment("16:00:00","HH:mm:ss");1==moment().isBetween(e,l)?(t=!0,$(".marketStatus").html("Open").css("color","#31c331")):(t=!1,$(".marketStatus").html("Closed").css("color","red"))})});
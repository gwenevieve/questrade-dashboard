$(document).ready(function(){var t;$.ajax({url:"/test",type:"GET",success:function(a){console.log(a);let e="",l="",s="",c="",o="";checkMarketStatus(),$.each(a,function(a,i){1==t?(l+=`<li>${i.openPrice}</li>`,s+=`<li>${i.highPrice}</li>`,c+=`<li>${i.lowPrice}</li>`):(l+="<li>--</li>",s+="<li>--</li>",c+="<li>--</li>"),watchlistChartData=[6770].lastTradePrice,e+=`<li>${i.symbol}</li>`,o+=`<li><span>${i.lastTradePrice}</span></li>`,$(".watchlistName").html(e),$(".watchlistLastTradePrice").html(o),$(".watchlistOpenPrice").html(l),$(".watchlistHighPrice").html(s),$(".watchlistLowPrice").html(c),0==t?$(".watchlistLastTradePrice li span").css("background","#797979"):l>o?$(".watchlistLastTradePrice li span").css("background","red"):l<o&&$(".watchlistLastTradePrice li span").css("background","#31c331")}),chartDisplay(l,o),console.log(myChart.data),addData(myChart,"one",watchlistChartData)},error:console.error}),$(".search__submit").on("click",function(t){t.preventDefault(),$.ajax({url:"/search",type:"GET",data:{symbol:$("#search").val()},success:function(t){console.log(t);let a="",e="",l="";$.each(t,function(t,s){if(console.log(t),9===t)return!1;a+=`<li>${s.symbol}</li>`,e+=`<li>${s.symbolId}</li>`,l+=`<li>${s.description}</li>`,$(".name").html(a),$(".symbolId").html(e),$(".symbolDesc").html(l)})},error:console.error})}),chartDisplay=((t,a)=>{console.log(t);let e=document.getElementById("myChart").getContext("2d");myChart=new Chart(e,{type:"line",data:{labels:["one","two"],datasets:[{label:"Current price",fill:!1,borderColor:"#2fb5c6",data:[t,a]}]},options:{responsive:!0,maintainAspectRatio:!1}})}),addData=((t,a,e)=>{setInterval(function(){console.log("updating"),t.data.labels.push(a),t.data.datasets.forEach(t=>{t.data.push([e])}),t.update()},5e3)}),checkMarketStatus=(()=>{moment().format("HH:mm:ss");let a=moment("09:30:00","HH:mm:ss"),e=moment("16:00:00","HH:mm:ss"),l=moment().isBetween(a,e);console.log(l),1==l?(t=!0,$(".marketStatus").html("Open").css("color","#31c331")):(t=!1,$(".marketStatus").html("Closed").css("color","red"))})});